import{a as F,b}from"./chunk-YM5X7IU2.js";import{a as N}from"./chunk-QBPXQQW3.js";import{Ba as O,Ca as g,Da as v,Ha as c,Ia as A,Ja as d,Na as C,O as D,Q as x,R as E,T,Xa as S,ba as r,ga as w,ia as f,ib as I,mb as k,qa as h,ra as y,sa as _,ta as m,ua as u,va as s,wa as o,xa as a,ya as P}from"./chunk-NACUJKL6.js";var $=e=>["/article",e];function G(e,l){if(e&1&&(o(0,"li",5),c(1),a()),e&2){let t=l.$implicit;r(),d(" ",t," ")}}var M=(()=>{class e{toggleFavorite(t){this.article.favorited=t,t?this.article.favoritesCount++:this.article.favoritesCount--}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-article-preview"]],inputs:{article:"article"},decls:14,vars:8,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"toggle","article"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],[1,"tag-default","tag-pill","tag-outline"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),g("toggle",function(q){return i.toggleFavorite(q)}),c(3),a()(),o(4,"a",3)(5,"h1"),c(6),a(),o(7,"p"),c(8),a(),o(9,"span"),c(10,"Read more..."),a(),o(11,"ul",4),m(12,G,2,1,"li",5,_),a()()()),n&2&&(r(),s("article",i.article),r(),s("article",i.article),r(),d(" ",i.article.favoritesCount," "),r(),s("routerLink",C(6,$,i.article.slug)),r(2),A(i.article.title),r(2),A(i.article.description),r(4),u(i.article.tagList))},dependencies:[F,b,I],encapsulation:2})}}return e})();var p=(function(e){return e.NOT_LOADED="NOT_LOADED",e.LOADING="LOADING",e.LOADED="LOADED",e})(p||{});var B=e=>({active:e}),Q=(e,l)=>l.slug;function V(e,l){e&1&&(o(0,"div",0),c(1,"Loading articles..."),a())}function j(e,l){if(e&1&&P(0,"app-article-preview",1),e&2){let t=l.$implicit;s("article",t)}}function U(e,l){e&1&&(o(0,"div",0),c(1,"No articles are here... yet."),a())}function z(e,l){if(e&1){let t=O();o(0,"li",3)(1,"button",4),g("click",function(){let i=x(t).$implicit,L=v(2);return E(L.setPageTo(i))}),c(2),a()()}if(e&2){let t=l.$implicit,n=v(2);s("ngClass",C(2,B,t===n.currentPage)),r(2),d(" ",t," ")}}function H(e,l){if(e&1&&(m(0,j,1,1,"app-article-preview",1,Q,!1,U,2,0,"div",0),o(3,"nav")(4,"ul",2),m(5,z,3,4,"li",3,_),a()()),e&2){let t=v();u(t.results),r(5),u(t.totalPages)}}var le=(()=>{class e{set config(t){t&&(this.query=t,this.currentPage=1,this.runQuery())}constructor(t){this.articlesService=t,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=p.NOT_LOADED,this.LoadingState=p,this.destroyRef=D(T)}setPageTo(t){this.currentPage=t,this.runQuery()}runQuery(){this.loading=p.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe(k(this.destroyRef)).subscribe(t=>{this.loading=p.LOADED,this.results=t.articles,this.totalPages=Array.from(new Array(Math.ceil(t.articlesCount/this.limit)),(n,i)=>i+1)})}static{this.\u0275fac=function(n){return new(n||e)(w(N))}}static{this.\u0275cmp=f({type:e,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},decls:2,vars:2,consts:[[1,"article-preview"],[3,"article"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(n,i){n&1&&(h(0,V,2,0,"div",0),h(1,H,7,1)),n&2&&(y(i.loading===i.LoadingState.LOADING?0:-1),r(),y(i.loading===i.LoadingState.LOADED?1:-1))},dependencies:[M,S],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]})}}return e})();export{le as a};
